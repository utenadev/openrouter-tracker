# Feature TODO List

このドキュメントは、将来的に実装を検討する機能のリストです。

## 高優先度

### 1. OpenRouter APIからのJSONデータ取得
- **概要**: OpenRouter APIからJSON形式でLLMモデル情報を取得する
- **目的**: すべてのFree LLMの増減を検出する
- **課題**: APIキーが必要
- **対応**: APIキーの取得と認証機能の実装
- **優先度**: 高
- **状態**: 見送り（APIキーが必要なため）

### 2. 動的パースロジック（modsを使用）
- **概要**: modsを使用して動的にパースロジックを修正する
- **目的**: データ形式が変更された場合に自動的に対応する
- **課題**: modsのインテグレーションとエラーハンドリング
- **対応**: 別プロセスでmodsを呼び出し、パースエラーが発生した場合に修正を試みる
- **優先度**: 高
- **状態**: 計画中

### 3. ページングのサポート
- **概要**: 複数ページにわたるモデルを取得する
- **目的**: より多くのモデルを取得する
- **課題**: ページングパラメータの追加とエラーハンドリング
- **対応**: `limit`と`offset`パラメータを追加する
- **優先度**: 中
- **状態**: 計画中

## 中優先度

### 4. モデルの増減検出
- **概要**: モデルの取り扱い開始/終了を検出する
- **目的**: 新規モデルの追加やモデルの削除を通知する
- **課題**: モデルリストの比較ロジック
- **対応**: 現在のモデルリストと新しいモデルリストを比較する
- **優先度**: 中
- **状態**: 部分的に実装済み（新規モデルの検出のみ）

### 5. エラーハンドリングの強化
- **概要**: より堅牢なエラーハンドリングを実装する
- **目的**: 運用上のトラブルを減少させる
- **課題**: エラーメッセージの詳細化と監視機能の追加
- **対応**: エラーメッセージの詳細化と監視機能の追加
- **優先度**: 中
- **状態**: 計画中

### 6. ロギングの強化
- **概要**: より詳細なロギングを実装する
- **目的**: デバッグと運用の容易化
- **課題**: ログレベルの調整とログメッセージの詳細化
- **対応**: ログレベルの調整とログメッセージの詳細化
- **優先度**: 中
- **状態**: 計画中

## 低優先度

### 7. 設定ファイルの拡張
- **概要**: 設定ファイルを拡張してより多くのオプションをサポートする
- **目的**: 柔軟性の向上
- **課題**: 設定ファイルの構造の見直し
- **対応**: 設定ファイルの構造の見直し
- **優先度**: 低
- **状態**: 計画中

### 8. テストの強化
- **概要**: より包括的なテストを実装する
- **目的**: コードの品質向上
- **課題**: テストケースの追加とテストカバレッジの向上
- **対応**: テストケースの追加とテストカバレッジの向上
- **優先度**: 低
- **状態**: 計画中

### 9. ドキュメントの強化
- **概要**: より詳細なドキュメントを作成する
- **目的**: 開発と運用の容易化
- **課題**: ドキュメントの構造の見直し
- **対応**: ドキュメントの構造の見直し
- **優先度**: 低
- **状態**: 計画中

## 将来的な改善

### 10. JSONパーサーの追加
- **概要**: OpenRouter APIからJSON形式でデータを取得する機能を追加する
- **目的**: すべてのFree LLMの増減を検出する
- **課題**: APIキーの取得と認証機能の実装
- **対応**: APIキーの取得と認証機能の実装
- **優先度**: 将来的
- **状態**: 見送り（APIキーが必要なため）

### 11. ハイブリッドデータ取得
- **概要**: テーブル形式（全件）とリスト形式（上位16件）のデータを組み合わせて完全なデータセットを取得する
- **目的**: メインをテーブル形式にして、上位16件の週間トークン数をouter join的に追加する
- **課題**: 
  - リスト形式パーサーの実装
  - データ統合ロジックの実装
  - エラーハンドリングの強化
  - パフォーマンス最適化
- **対応**: 
  - `parse_list_markdown()`関数の実装
  - `integrate_model_data()`関数の実装
  - `fetch_list_markdown()`関数の実装
  - メイン関数の更新
- **優先度**: 高（設計済み、実装待ち）
- **状態**: 設計済み
- **メリット**: 
  - 完全なデータセット（全件 + 週間トークン数）
  - 柔軟性（片方の形式が失敗しても動作）
  - 拡張性（新しい形式にも対応可能）
  - 信頼性（データの信頼性向上）
- **デメリット**: 
  - コードの複雑性が増加
  - API呼び出し回数が増加
  - メンテナンスコストが増加

### 12. ハイブリッドアプローチ
- **概要**: 両方の方法をサポートし、設定で切り替えられるようにする
- **目的**: 柔軟性の向上
- **課題**: 設定ファイルの拡張とロジックの見直し
- **対応**: 設定ファイルの拡張とロジックの見直し
- **優先度**: 将来的
- **状態**: 計画中

### 12. モデルの詳細情報の取得
- **概要**: モデルの詳細情報を取得する
- **目的**: より詳細な情報を提供する
- **課題**: APIの拡張とデータベーススキーマの見直し
- **対応**: APIの拡張とデータベーススキーマの見直し
- **優先度**: 将来的
- **状態**: 計画中

## 実装済み機能

### 1. トレンドモデルの取得
- **概要**: r.jina.ai経由でトレンドモデルを取得する
- **目的**: 週間トークン使用量順のモデルを取得する
- **状態**: 実装済み

### 2. データベースの保存
- **概要**: モデル情報と日次統計をデータベースに保存する
- **目的**: データの永続化
- **状態**: 実装済み

### 3. Discord通知
- **概要**: トップ5モデル、新規モデル、サマリーを通知する
- **目的**: 通知機能の提供
- **状態**: 実装済み

### 4. エラーハンドリング
- **概要**: 適切なエラーハンドリングとリトライロジック
- **目的**: 運用上のトラブルを減少させる
- **状態**: 実装済み

## 更新履歴

- 2026-01-01: 初版作成
- 2026-01-01: ハイブリッドデータ取得機能を追加（設計済み）
